---
title: "Hack your way to a good Git history"
date: '2024-06-11'
slug: rewrite-git-history
output: hugodown::hugo_document
tags:
  - good practice
  - git
---

I've now explained on this blog why it's important to have [small, informative Git commits](/2024/06/03/small-commits/)[^small] and how I've realized that polishing history can happen in a [second phase of work in a branch](/2023/12/07/two-phases-git-branches/).
However, I've more or less glossed over _how_ to craft the history in a branch once you're done with the work.

I've entitled this post _"Hack your way to a good Git history"_ because writing the history after the fact can feel like cheating, but it's not!

## To branch or not to branch

With the first method of re-writing history I'll present, you could get away with working on the default branch as long as you do not push.
However, I'd really recommend creating a branch before you start working on whatever task you've assigned yourself, be it a bug fix, new feature or some refactoring.
It feels safer, and it's a good habit to take.

On the default branch, you can't force push, whereas in your own branch, you can push regularly as your work, as a backup of sorts, then rewrite history, then force push.

Now let's assume you did a bunch of changes in a branch: adding a bug fix to a script, as well as refactoring part of it, adding a test to ensure the bug never reappears

## "The repeated amend":tm:: `git commit --amend`


_Thanks to Jenny Bryan for describing this workflow and for [pointing me to it](https://fosstodon.org/@jennybryan/111540760887095683)._

## "Start from scratch": `git reset --soft` + `git add` (`--patch`)

_Thanks to Hugo Gruson for introducing me to this workflow_

## "Mix and match your commits": `git rebase -i`

[^small]: I should also have added "atomic", because if you can't load your project at a given commit because of a missing parenthesis, then you can't run Git bisect for instance. 